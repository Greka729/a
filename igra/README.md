# Платформер "SkyRun" на Python (Pygame)

## Описание игры
- **Жанр и концепция**: 2D платформер с элементами сбора предметов и уклонения от врагов. Игрок управляет персонажем, который пробирается по парящим платформам, избегает врагов, собирает кристаллы и добирается до портала, чтобы завершить уровень.
- **Целевая аудитория**: дети и подростки 10–18 лет, а также любители казуальных 2D платформеров.

## Игровое поле / уровни
- **Структура уровней**: уровень представляет собой 2D арену фиксированного размера с набором платформ разной ширины/высоты. Есть стартовая точка игрока, кристаллы для сбора и финишный портал.
- **Окружение**: фон, платформы, простые препятствия (шипы) и враги с патрулированием по заданному маршруту.

## Управление
- **Клавиатура**:
  - Влево/вправо: A/D или стрелки ←/→
  - Прыжок: Пробел или W/↑
  - Пауза в игре: Esc
  - **Меню**: Enter/Space — старт, S — Settings, Esc — выход/назад
  - **Настройки**: Up/Down — выбор, Left/Right — громкость, Enter/Space — переключить mute, Esc — назад
  - **Звук**: M — вкл/выкл в игре

## Персонажи и объекты
- **Игрок**: передвижение влево/вправо, прыжок, столкновения с платформами.
- **Враги**: патрулируют на заданном отрезке; при контакте — респаун игрока.
- **Кристаллы**: сбор увеличивает счёт.
- **Портал**: завершает уровень (перезапуск уровня), сохраняет лучший результат.

## Основные игровые механики
- **Перемещение**: физика с гравитацией и столкновениями.
- **Взаимодействия**: сбор кристаллов, столкновения с врагами, портал.
- **Система очков**: +1 за кристалл; HUD: Score/Best/FPS.
- **Пауза**: Esc в игре.

## Примерные сценарии и геймплей
1. Игрок появляется на стартовой платформе.
2. Передвигается по платформам, собирает кристаллы, избегает врагов.
3. Падение вниз/удар о врага — респаун.
4. Достижение портала — перезапуск уровня, обновление Best.

---

## Целевая аудитория и платформы
- **Возраст и интересы**: 10–18 лет, интерес к аркадам, платформерам, пиксель-арту.
- **Платформы**: ПК (Windows, Linux, macOS). Запуск через Python 3.x.

---

## Технические требования
- **Язык**: Python 3.9+
- **Библиотеки**: `pygame`
- **ОС**: Windows / Linux / macOS
- **Интерфейс**: графический (Pygame)
- **Производительность**: 60 FPS; простые спрайты и логика.
- **Масштабирование**: модульная архитектура (`src/game/`).

---

## Дизайн и графика
- **Стиль**: 2D спрайты/геометрия в прототипе; можно заменить на пиксель-арт.
- **Анимации**: в расширении; в базовой версии — статические прямоугольники.
- **Разрешение**: 960×540 (16:9), масштабируемо.

## Звук и музыка
- **Эффекты**: прыжок, сбор, удар, портал (опциональные WAV-файлы).
- **Музыка**: фоновая петля (опциональный `music.ogg`).
- **Форматы**: `.wav`, `.ogg`/`.mp3`.
- **Громкость/мьют**: настраиваются; сохраняются в `save.json`.

---

## Функциональные требования
- **Меню**: старт, настройки, выход; пауза в игре.
- **Сохранение/загрузка**: `save.json` хранит Best и аудио-настройки.
- **Настройки**: mute/volume, применяются сразу.
- **Логика**: физика, столкновения, сбор, счёт, портал.

---

## Тестирование
### Чеклист геймплея
- Перемещение: удержание A/D (←/→) двигает игрока с ожидаемой скоростью.
- Прыжок: на земле — один прыжок; в воздухе повтор не срабатывает.
- Столкновения: игрок не проходит сквозь платформы; «прилипаний» нет.
- Падение: выход за нижнюю границу — респаун на SPAWN_POINT.
- Враги: патруль ограничен min/max; при контакте — респаун.
- Кристаллы: при сборе исчезают, счёт увеличивается.
- Портал: при контакте — перезапуск уровня; Best может обновиться.
- Пауза: Esc останавливает обновление мира, HUD показывает «PAUSED».

### Чеклист UI/аудио
- Меню: Enter/Space — старт; Esc — выход; S — Settings.
- Settings: Up/Down — переключение; Left/Right — громкость; Enter/Space — mute.
- M в игре — переключает mute; индикатор настроек (громкость) сохраняется.
- Звук/музыка не приводят к падениям, даже при отсутствии файлов в `assets/sounds`.

### Производительность
- Целевой FPS: ~60 на окне 960×540; нет заметных просадок при движении и прыжках.

### Регрессия сохранений
- Изменить громкость/мьют, выйти (Esc в меню или закрыть окно) — перезапуск показывает те же значения.
- Достигнуть портала с ненулевым счётом — Best сохранён и виден в меню/HUD.

### Как запускать тесты вручную
1. Активировать виртуальное окружение и установить зависимости (см. ниже).
2. Запустить игру `python -m src.main`.
3. Пройтись по чеклистам выше.

---

## Установка и запуск
```bash
python -m venv .venv
. .venv/Scripts/Activate.ps1  # Windows PowerShell
python -m pip install -r requirements.txt
python -m src.main
```

## Структура проекта
```
assets/
  fonts/  images/  sounds/
src/
  game/
    __init__.py
    game.py
    level.py
    player.py
    enemy.py
    save.py
    sound.py
  settings.py
  main.py
requirements.txt
README.md
```
